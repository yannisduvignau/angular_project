# CI steps
- {1} : nous déclencherons cette action à chaque fois que nous créerons une demande d'extraction (Pull Request) ou lorsque nous fusionnerons/validerons la branche principale . Cela nous aidera à nous assurer que notre code fonctionne après toute modification de code ou mise à niveau de dépendance et que nous pourrons fusionner la demande d'extraction en toute sécurité.
- {2} : cette action GitHub est chargée de vérifier le code source, nous pouvons exécuter les tests et le créer.
- {3} : c'est ici que nous définissons quel est le runtime que nous utiliserons dans ce pipeline. Comme dans Angular, nous nous appuyons sur NPM pour la gestion des dépendances et nous utilisons un fichier package.json pour spécifier les tâches, nous devons utiliser Node.js comme base de notre environnement. Vous pouvez spécifier n'importe quelle version de Node.js nécessaire, et pour les projets Angular, consultez ce lien pour la matrice de compatibilité. Pour le cache, il est également bon de spécifier où se trouve le package-lock.json pour accélérer le processus de construction.
- {4} : une fois notre code extrait et que Node.js est disponible, nous pouvons continuer et exécuter npm cil'installation de toutes les dépendances du projet dans notre environnement temporaire. Cela installera les packages répertoriés dans package.json au lieu d'une nouvelle installation.
- {5} : avec tout installé, l'étape suivante consiste à exécuter les tests que nous avons dans notre projet. Cependant, nous n'exécuterons pas ng test, car cela échouera dans le pipeline. Pour le pipeline CI, nous devons spécifier une commande de test qui n'ouvrira pas de navigateur pendant le test, ce qui signifie qu'il sera sans tête. Nous pouvons utiliser le script suivant dans notre package.json :
"test:ci": "ng test --no-watch --no-progress --browsers=ChromeHeadless",
- {6} : Enfin et surtout, nous allons créer l'application pour nous assurer qu'elle compile et génère le bundle de production sans problème.
